{%- if page.milestones -%}
    <div class="max-w-4xl mx-auto mb-16">
      <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-12 text-center">Timeline</h2>

      <div class="timeline relative">
        <!-- Center line -->
        <div class="absolute left-1/2 transform -translate-x-1/2 w-0.5 h-full bg-gray-300 dark:bg-gray-600"></div>

        {%- for milestone in page.milestones -%}
        {%- assign index = forloop.index | modulo: 2 -%}

        {%- if index == 1 -%}
        <!-- Left side milestone (odd items) -->
        <div class="timeline-item relative mb-8">
          <div class="flex items-start">
            <!-- Content on left -->
            <div class="w-1/2 pr-8 text-right">
              <div class="timeline-date text-md font-semibold text-red-600 dark:text-red-400 mb-2">
                {{ milestone.date | date: "%B %d, %Y" }}
              </div>

              {%- if milestone.title -%}
              <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-3">{{ milestone.title }}</h3>
              {%- endif -%}

              {%- if milestone.image -%}
              <div class="mb-4">
                <img src="{{ milestone.image | relative_url }}"
                     alt="{{ milestone.title }}"
                     class="w-full rounded-lg shadow-md ml-auto">
              </div>
              {%- endif -%}

              {%- if milestone.description -%}
              <p class="text-gray-700 dark:text-gray-300">{{ milestone.description }}</p>
              {%- endif -%}
            </div>

            <!-- Center dot -->
            <div class="absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-red-600 dark:bg-red-400 border-4 border-white dark:border-gray-900 z-10 mt-1"></div>

            <!-- Empty space on right -->
            <div class="w-1/2 pl-8"></div>
          </div>
        </div>
        {%- else -%}
        <!-- Right side milestone (even items) -->
        <div class="timeline-item relative mb-8 -mt-32">
          <div class="flex items-start">
            <!-- Empty space on left -->
            <div class="w-1/2 pr-8"></div>

            <!-- Center dot -->
            <div class="absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-red-600 dark:bg-red-400 border-4 border-white dark:border-gray-900 z-10 mt-1"></div>

            <!-- Content on right -->
            <div class="w-1/2 pl-8 text-left">
              <div class="timeline-date text-md font-semibold text-red-600 dark:text-red-400 mb-2">
                {{ milestone.date | date: "%B %d, %Y" }}
              </div>

              {%- if milestone.title -%}
              <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-3">{{ milestone.title }}</h3>
              {%- endif -%}

              {%- if milestone.image -%}
              <div class="mb-4">
                <img src="{{ milestone.image | relative_url }}"
                     alt="{{ milestone.title }}"
                     class="w-full rounded-lg shadow-md">
              </div>
              {%- endif -%}

              {%- if milestone.description -%}
              <p class="text-gray-700 dark:text-gray-300">{{ milestone.description }}</p>
              {%- endif -%}
            </div>
          </div>
        </div>
        {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
{%- endif -%}