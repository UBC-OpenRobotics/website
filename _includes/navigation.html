<nav class="bg-white dark:bg-gray-800 w-full border-b border-gray-200 dark:border-gray-700 fixed top-0 z-50 transition-colors duration-200 shadow-md dark:shadow-none" style="font-family: 'JetBrains Mono', sans-serif">
  <div class="max-w-screen-xl mx-auto px-4 md:px-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between py-1">

      <!-- Nav links -->
      <ul class="flex flex-col md:flex-row md:space-x-12 space-y-2 md:space-y-0 mb-2 md:mb-0">
        {% for item in site.data.navigation %}
        <li><a href="{{ item.link }}" class="text-gray-900 font-light dark:text-gray-100 hover:text-red-600 dark:hover:text-red-500 md:text-base transition-colors uppercase">{{ item.name }}</a></li>
        {% endfor %}
      </ul>

      <!-- Donate button + map pin -->
      <div class="flex items-center space-x-4">
        
        
        <!-- Map pin icon -->
        <div class="relative" id="locationDropdown">
          <button onclick="toggleLocationDropdown()"
          class="p-2 text-gray-900 dark:text-gray-100 hover:text-red-600 dark:hover:text-red-500 transition-colors"
          aria-label="Location">
          <span class="material-icons text-3xl">location_on</span>
        </button>

          <!-- Desktop dropdown menu -->
          <div id="dropdownMenu"
               class="hidden md:absolute md:right-0 md:mt-2 md:w-80 md:border md:border-gray-300 dark:md:border-gray-600 md:rounded-lg md:shadow-xl
                      fixed inset-0 md:inset-auto bg-white dark:bg-gray-800 z-50 transition-colors duration-200">
            <!-- Mobile header -->
            <div class="md:hidden flex items-center justify-between p-4 border-b-2 border-gray-200 dark:border-gray-700">
              <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Our Location</h3>
              <button onclick="toggleLocationDropdown()" class="p-1 text-gray-900 dark:text-gray-100 hover:text-red-600 dark:hover:text-red-500">
                <span class="material-icons text-3xl">close</span>
              </button>
            </div>

            <div class="p-4 md:p-4">
              <!-- Desktop header, hidden for mobile -->
              <h3 class="hidden md:block text-lg font-bold text-gray-900 dark:text-gray-100 mb-2">Our Location</h3>

              <p class="text-sm md:text-sm text-gray-700 dark:text-gray-300 mb-3 mt-4 md:mt-0">
                <strong>Hennings Building Room 200</strong><br>
                6224 Agricultural Rd #325<br>
                Vancouver, BC V6T 1Z1
              </p>

              <div class="w-full h-64 md:h-48 rounded-md overflow-hidden">
                <iframe
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2603.5233475984237!2d-123.25476908768105!3d49.26647977178184!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x548672b6f5321131%3A0x1877a1f004691be!2sHennings%20Building!5e0!3m2!1sen!2sca!4v1763926664596!5m2!1sen!2sca"
                  width="100%"
                  height="100%"
                  style="border:0;"
                  allowfullscreen=""
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade">
                </iframe>
              </div>

              <a href="https://maps.app.goo.gl/PDkgJSt9E2Qph4Em9"
                 target="_blank"
                 class="mt-4 md:mt-3 block text-center py-3 md:py-2 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors">
                Open in Google Maps
              </a>
            </div>
          </div>

          <!-- Mobile Backdrop overlay -->
          <div id="modalBackdrop"
               class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden"
               onclick="toggleLocationDropdown()">
          </div>
        </div>

        <!-- Sponsor  -->
        <!-- <a href="https://donate.support.ubc.ca/page/20924/donate/1?transaction.dirgift=Open+Robotics+Student+Team%20G1102"
           class="py-2 px-4 border-2 border-red-600 hover:bg-red-600 text-red-600 hover:text-white font-bold rounded-md transition-colors uppercase">
          Sponsor
        </a> -->
      </div>

    </div>
  </div>
</nav>

<script>
  function toggleLocationDropdown() {
    const dropdown = document.getElementById('dropdownMenu');
    const backdrop = document.getElementById('modalBackdrop');
    const isHidden = dropdown.classList.contains('hidden');

    if (isHidden) {
      // Open modal
      dropdown.classList.remove('hidden');
      backdrop.classList.remove('hidden');
      // Prevent body scroll on mobile when modal is open
      if (window.innerWidth < 768) {
        document.body.style.overflow = 'hidden';
      }
    } else {
      // Close modal
      dropdown.classList.add('hidden');
      backdrop.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  // Close dropdown when clicking outside (desktop only)
  document.addEventListener('click', function(event) {
    const locationDropdown = document.getElementById('locationDropdown');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const backdrop = document.getElementById('modalBackdrop');

    // Only close if clicking outside on desktop
    if (window.innerWidth >= 768 && locationDropdown && !locationDropdown.contains(event.target)) {
      dropdownMenu.classList.add('hidden');
      backdrop.classList.add('hidden');
      document.body.style.overflow = '';
    }
  });

  // Re-enable body scroll if window is resized
  window.addEventListener('resize', function() {
    const dropdown = document.getElementById('dropdownMenu');
    if (!dropdown.classList.contains('hidden') && window.innerWidth >= 768) {
      document.body.style.overflow = '';
    }
  });
</script>